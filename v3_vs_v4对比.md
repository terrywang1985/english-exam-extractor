# v3 vs v4 é—®é¢˜å¯¹æ¯”

## é—®é¢˜æ€»è§ˆ

| é—®é¢˜ | v3ç‰ˆæœ¬ | v4ç‰ˆæœ¬ | çŠ¶æ€ |
|-----|-------|-------|------|
| å®Œå½¢å¡«ç©ºæ–‡ä¸­ä¸‹åˆ’çº¿ | âŒ åªæ˜¾ç¤ºï¼ˆ16ï¼‰ï¼ˆ17ï¼‰ | âœ… æ˜¾ç¤ºï¼ˆ16ï¼‰________ï¼ˆ17ï¼‰________ | å·²ä¿®å¤ |
| é€‰è¯å¡«ç©ºé€‰é¡¹ | âŒ é€‰é¡¹å®Œå…¨ä¸¢å¤± | âœ… é€‰é¡¹æ¡†æ˜¾ç¤ºåœ¨æ–‡ç« å‰ | å·²ä¿®å¤ |
| é¦–å­—æ¯å¡«ç©ºä¸‹åˆ’çº¿ | âŒ åªæ˜¾ç¤ºï¼ˆ36ï¼‰p | âœ… æ˜¾ç¤ºï¼ˆ36ï¼‰p________ | å·²ä¿®å¤ |
| ç­”æ¡ˆæ˜¾ç¤º | âŒ åªæ˜¾ç¤ºå•ä¸ªå­—æ¯B | âœ… å®Œæ•´ç­”æ¡ˆï¼šBã€Dã€Aã€E | å·²ä¿®å¤ |

---

## é—®é¢˜1ï¼šå®Œå½¢å¡«ç©ºæ–‡ä¸­ä¸‹åˆ’çº¿ä¸¢å¤±

### v3ç‰ˆæœ¬ âŒ
```
åŸæ–‡åº”è¯¥ï¼š
When people wanted to find their way...for just about ï¼ˆ16ï¼‰________.
Is this an ï¼ˆ17ï¼‰________ï¼Ÿ

å®é™…æ˜¾ç¤ºï¼š
When people wanted to find their way...for just about ï¼ˆ16ï¼‰.
Is this an ï¼ˆ17ï¼‰ï¼Ÿ
```
**é—®é¢˜ï¼š** é¢˜å·æ²¡æœ‰ä¸‹åˆ’çº¿ï¼Œå­¦ç”Ÿä¸çŸ¥é“åœ¨å“ªå¡«ç­”æ¡ˆ

### v4ç‰ˆæœ¬ âœ…
```
When people wanted to find their way...for just about ï¼ˆ16ï¼‰________.
Is this an ï¼ˆ17ï¼‰________ï¼Ÿ
```
**ä¿®å¤ï¼š** é¢˜å·åæœ‰æ˜æ˜¾ä¸‹åˆ’çº¿ï¼Œæ¸…æ™°æ ‡è®°å¡«ç©ºä½ç½®

**ä¿®å¤ä»£ç ï¼š**
```javascript
// v3é”™è¯¯
htmlContent = htmlContent.replace(/ï¼ˆ(\d+)ï¼‰<!--BA-->/g, '<span class="cloze-blank">ï¼ˆ$1ï¼‰</span>');

// v4ä¿®å¤
htmlContent = htmlContent.replace(/ï¼ˆ(\d+)ï¼‰/g, '<span class="cloze-blank">ï¼ˆ$1ï¼‰________</span>');
```

---

## é—®é¢˜2ï¼šé€‰è¯å¡«ç©ºé€‰é¡¹ä¸¢å¤±

### v3ç‰ˆæœ¬ âŒ
```
ã€é€‰é¡¹æ¡†ï¼šæ— ã€‘

Most Americans take great pleasure in sending and receiving cards...
birthdays, holidays, and ï¼ˆ28ï¼‰.
If someone is going on a journey, a "Bon Voyage" card...ï¼ˆ29ï¼‰...
```
**é—®é¢˜ï¼š** æ²¡æœ‰é€‰é¡¹ï¼Œå­¦ç”Ÿä¸çŸ¥é“é€‰ä»€ä¹ˆè¯å¡«ç©º

### v4ç‰ˆæœ¬ âœ…
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é€‰é¡¹ï¼š                                          â”‚
â”‚ A.achievements  B.graduations                  â”‚
â”‚ C.Probably  D.Similarly  E.spirits             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Most Americans take great pleasure in sending and receiving cards...
birthdays, holidays, and ï¼ˆ28ï¼‰________.
If someone is going on a journey, a "Bon Voyage" card...ï¼ˆ29ï¼‰________...
```
**ä¿®å¤ï¼š** é€‰é¡¹æ¡†é†’ç›®æ˜¾ç¤ºåœ¨æ–‡ç« å‰ï¼Œä¸‹åˆ’çº¿æ¸…æ™°

**ä¿®å¤ä»£ç ï¼š**
```javascript
// è¯†åˆ«é€‰è¯å¡«ç©ºé¢˜å‹
const isWordSelection = sectionType && sectionType.includes('é€‰è¯å¡«ç©º');

if (isWordSelection) {
  // æå–é€‰é¡¹è¡¨æ ¼
  const optionsTable = clone.querySelector('table.composition2');
  if (optionsTable) {
    question.wordSelectionOptions = optionsTable.textContent.trim();
  }
}
```

**CSSç¾åŒ–ï¼š**
```css
.word-selection-box {
    background: #e7f3ff;
    border: 2px solid #0066cc;
    border-radius: 8px;
    padding: 15px;
}
```

---

## é—®é¢˜3ï¼šé¦–å­—æ¯å¡«ç©ºä¸‹åˆ’çº¿ä¸¢å¤±

### v3ç‰ˆæœ¬ âŒ
```
Most peopleï¼ˆ36ï¼‰p sand when they think of a desert...
Because the air is so dry, there is no moisture to keep the sun'sï¼ˆ37ï¼‰h overnight.
```
**é—®é¢˜ï¼š** åªçœ‹åˆ°å­—æ¯på’Œhï¼Œä¸çŸ¥é“éœ€è¦å¡«å®Œæ•´å•è¯

### v4ç‰ˆæœ¬ âœ…
```
Most peopleï¼ˆ36ï¼‰p________ sand when they think of a desert...
Because the air is so dry, there is no moisture to keep the sun'sï¼ˆ37ï¼‰h________ overnight.
```
**ä¿®å¤ï¼š** å­—æ¯åæœ‰ä¸‹åˆ’çº¿ï¼Œæ˜ç¡®éœ€è¦å¡«å†™å®Œæ•´å•è¯

**ä¿®å¤ä»£ç ï¼š**
```javascript
// è¯†åˆ«é¦–å­—æ¯å¡«ç©º
const isInitialLetter = sectionType && sectionType.includes('é¦–å­—æ¯');

if (isInitialLetter) {
  // å¤„ç†é¦–å­—æ¯å¡«ç©ºï¼šï¼ˆ36ï¼‰p  â†’ ï¼ˆ36ï¼‰p________
  htmlContent = htmlContent.replace(/ï¼ˆ(\d+)ï¼‰\s*([a-zA-Z])\s+/g, 
    '<span class="initial-letter-blank">ï¼ˆ$1ï¼‰$2________</span> ');
}
```

---

## é—®é¢˜4ï¼šç­”æ¡ˆæ˜¾ç¤ºé”™è¯¯

### v3ç‰ˆæœ¬ âŒ

**é€‰è¯å¡«ç©ºç­”æ¡ˆï¼š**
```
ç­”æ¡ˆï¼šB
```
âŒ åªæ˜¾ç¤ºç¬¬ä¸€ä¸ªç­”æ¡ˆï¼Œå…¶ä»–3ä¸ªç­”æ¡ˆä¸¢å¤±

**é¦–å­—æ¯å¡«ç©ºç­”æ¡ˆï¼š**
```
ç­”æ¡ˆï¼šicture
```
âŒ åªæ˜¾ç¤ºç¬¬ä¸€ä¸ªç­”æ¡ˆçš„ååŠéƒ¨åˆ†ï¼Œå…¶ä»–6ä¸ªç­”æ¡ˆä¸¢å¤±

**å®Œå½¢å¡«ç©ºç­”æ¡ˆï¼š**
```
ç­”æ¡ˆï¼šD
```
âŒ åªæ˜¾ç¤ºç¬¬ä¸€ä¸ªç­”æ¡ˆï¼Œå…¶ä»–5ä¸ªç­”æ¡ˆä¸¢å¤±

### v4ç‰ˆæœ¬ âœ…

**é€‰è¯å¡«ç©ºç­”æ¡ˆï¼š**
```
ç­”æ¡ˆï¼šBã€Dã€Aã€E
```
âœ… æ‰€æœ‰4ä¸ªç­”æ¡ˆå®Œæ•´æ˜¾ç¤ºï¼Œç”¨é¡¿å·åˆ†éš”

**é¦–å­—æ¯å¡«ç©ºç­”æ¡ˆï¼š**
```
ç­”æ¡ˆï¼špictureã€heatã€reasonã€deepã€dramaticallyã€nextã€provide
```
âœ… æ‰€æœ‰7ä¸ªç­”æ¡ˆå®Œæ•´æ˜¾ç¤ºï¼Œç”¨é¡¿å·åˆ†éš”

**å®Œå½¢å¡«ç©ºç­”æ¡ˆï¼š**
```
ç­”æ¡ˆï¼šD B A B D C
```
âœ… æ‰€æœ‰6ä¸ªç­”æ¡ˆå®Œæ•´æ˜¾ç¤ºï¼Œç”¨ç©ºæ ¼åˆ†éš”

**ä¿®å¤ä»£ç ï¼š**
```javascript
// æå–æ‰€æœ‰ç­”æ¡ˆ
const answerElements = clone.querySelectorAll('.sanwser');
const answers = Array.from(answerElements).map(el => el.textContent.trim()).filter(a => a);

if (isWordSelection || isInitialLetter) {
  // é€‰è¯å¡«ç©ºå’Œé¦–å­—æ¯ï¼šç”¨é¡¿å·åˆ†éš”
  question.answer = answers.join('ã€');
} else if (isCloze) {
  // å®Œå½¢å¡«ç©ºï¼šç”¨ç©ºæ ¼åˆ†éš”
  question.answer = answers.join(' ');
} else {
  // å…¶ä»–ï¼šå•ä¸ªç­”æ¡ˆ
  question.answer = answers[0] || '';
}
```

---

## æ ¸å¿ƒåŒºåˆ«æ€»ç»“

### v3ç‰ˆæœ¬çš„é—®é¢˜
1. **é¢˜å‹è¯†åˆ«ä¸å®Œæ•´**ï¼šåªè¯†åˆ«äº†å®Œå½¢å¡«ç©ºï¼Œæ¼æ‰é€‰è¯å¡«ç©ºå’Œé¦–å­—æ¯å¡«ç©º
2. **ä¸‹åˆ’çº¿å¤„ç†é”™è¯¯**ï¼šå®Œå½¢å¡«ç©ºé¢˜å·æ²¡åŠ ä¸‹åˆ’çº¿
3. **é€‰é¡¹æå–ç¼ºå¤±**ï¼šé€‰è¯å¡«ç©ºçš„é€‰é¡¹è¢«åˆ é™¤
4. **ç­”æ¡ˆæå–ä¸å…¨**ï¼šåªå–ç¬¬ä¸€ä¸ª`.sanwser`å…ƒç´ 

### v4ç‰ˆæœ¬çš„æ”¹è¿›
1. **å®Œæ•´é¢˜å‹è¯†åˆ«**ï¼šè¯†åˆ«5ç§é¢˜å‹ï¼ˆå®Œå½¢ã€é€‰è¯ã€é¦–å­—æ¯ã€é˜…è¯»ã€æ™®é€šï¼‰
2. **æ™ºèƒ½ä¸‹åˆ’çº¿**ï¼šæ ¹æ®é¢˜å‹æ·»åŠ ä¸åŒæ ·å¼çš„ä¸‹åˆ’çº¿
3. **é€‰é¡¹ä¿ç•™**ï¼šé€‰è¯å¡«ç©ºé€‰é¡¹æ˜¾ç¤ºåœ¨é†’ç›®ä½ç½®
4. **å®Œæ•´ç­”æ¡ˆ**ï¼šæ”¶é›†æ‰€æœ‰ç­”æ¡ˆï¼Œæ ¹æ®é¢˜å‹é€‰æ‹©åˆ†éš”ç¬¦

---

## ä½¿ç”¨å»ºè®®

### ç«‹å³æ›´æ–°åˆ°v4
1. æ‰“å¼€ `chrome://extensions/`
2. æ‰¾åˆ°æ‰©å±•ï¼Œç‚¹å‡»åˆ·æ–°æŒ‰é’®ğŸ”„
3. é‡æ–°æ‰“å¼€è¯•å·é¡µé¢
4. é‡æ–°å¯¼å‡ºHTML

### éªŒè¯ä¿®å¤æ•ˆæœ
- [x] å®Œå½¢å¡«ç©ºï¼šæ–‡ä¸­æœ‰ä¸‹åˆ’çº¿ + æ–‡åæœ‰é€‰é¡¹è¡¨
- [x] é€‰è¯å¡«ç©ºï¼šæ–‡å‰æœ‰é€‰é¡¹æ¡† + æ–‡ä¸­æœ‰ä¸‹åˆ’çº¿
- [x] é¦–å­—æ¯ï¼šå­—æ¯åæœ‰ä¸‹åˆ’çº¿
- [x] ç­”æ¡ˆï¼šå®Œæ•´æ˜¾ç¤ºï¼Œæ ¼å¼æ­£ç¡®

---

**ç»“è®ºï¼šv4ç‰ˆæœ¬å®Œå…¨ä¿®å¤äº†v3çš„æ‰€æœ‰é—®é¢˜ï¼Œå¯ä»¥æ­£å¼ä½¿ç”¨ï¼** âœ…
